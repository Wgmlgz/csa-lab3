# CSA-lab3

–ú–∞—Ü—é–∫ –í–ª–∞–¥–∏–º–∏—Ä –ù–∏–∫–æ–ª–∞–µ–≤–∏—á, P3215

```txt
lisp -> asm | acc | neum | hw | instr | struct | stream | port | pstr | prob2 | cache
```

–ë–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

## –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è

### –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

```bnf
<program> ::= <exp>

<exp> ::= "(" | <exp>*
              | <function>
              | <import-exp>
              | <exp-exp>
              | <let-exp>
              | <def-exp>
              | <set-exp>
              | <literal>
              | <identifier>
              | <function-call>
              | <operator-exp>
              | <if-exp>
              | <while-exp> ")"

<import-exp> ::= "import" <string>
<function> ::= "fn" <identifier> <parameter>* <type>? <exp>
<parameter> ::= "(" <identifier> <type> ")"
<type> ::= "int" | "str" "*"*
<let-exp> ::= "let" <identifier> <exp>
<def-exp> ::= "def" <identifier> <exp>
<set-exp> ::= "set" <identifier> <exp>
<literal> ::= <numeric> | <string>
<function-call> ::= <identifier> <exp>*
<operator-exp> ::= <bin-op> | <un-op>
<bin-op> ::= <bin-operator> <exp> <exp>
<un-op> ::= <operator> <exp>
<operator-exp> ::= <operator> <exp> <exp>
<bin-operator> ::= "+" | "-" | "*" | "/" | "=" | "%"
<un-operator> ::= "*" | "->" | "." | "-" | "+"
<if-exp> ::= "if" <exp> <exp> <exp>
<while-exp> ::= "while" <exp> <exp>

<identifier> ::= "'"? <character> <identifier-char>*
<numeric> ::= <digit>+
<string> ::= "\"" <string-character>* "\""
<identifier-char> ::= <character> | <digit>
<character> ::= "a" | "b" | ... | "z" | "A" | "B" | ... | "Z" | "_"
<digit> ::= "0" | "1" | ... | "9"
<string-character> ::= <character> | <digit> | <escape-sequence> | " "
<escape-sequence> ::= "\n" | "\\"
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏–∫–∏

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –≤ –≤–∏–¥–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–π, –≥–¥–µ –∫–∞–∂–¥–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –æ–±–ª–∞–¥–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏ –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å –Ω–∏–º —Ç–∏–ø–æ–º. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ —è–∑—ã–∫–µ –º–æ–≥—É—Ç –±—ã—Ç—å –±–∞–∑–æ–≤—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `int`, `char`), —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `int*`), —Å–æ—Å—Ç–∞–≤–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `str`), –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `(int, str) -> int`). –°–æ—Å—Ç–∞–≤–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∏–ø `str` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Å–∏–º–≤–æ–ª—ã (`ptr char*`) –∏ –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏ (`len in`t). –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø `void`/`()` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä 0. –í—Å–µ —Ç–∏–ø—ã, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º `()`, –∏–º–µ—é—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–æ–ª—å—à–µ –Ω—É–ª—è.

- –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π: –í—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ —è–∑—ã–∫–µ —Å–ª–µ–¥—É—é—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ "–≤—ã–∑–æ–≤–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é", –≥–¥–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ —Ñ—É–Ω–∫—Ü–∏—é. –≠—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∑–∞ —Å—á–µ—Ç —è–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–æ—Ä—è–¥–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

- –û–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏: –Ø–∑—ã–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–ª–æ—á–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ —É—Å–ª–æ–≤–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è), –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞, –∏ –µ–≥–æ –ø–æ—Ç–æ–º–∫–∞—Ö. –û–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –º–æ–≥—É—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å—Å—è, –ø—Ä–∏ —ç—Ç–æ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –±–ª–æ–∫–∏ –º–æ–≥—É—Ç —Å–∫—Ä—ã–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–ª–æ–∫–æ–≤.

- –¢–∏–ø–∏–∑–∞—Ü–∏—è: –Ø–∑—ã–∫ —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–æ–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π. –°–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, —á—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –≤—ã—è–≤–ª–µ–Ω–∏—é –æ—à–∏–±–æ–∫ –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.

- –í–∏–¥—ã –ª–∏—Ç–µ—Ä–∞–ª–æ–≤: –õ–∏—Ç–µ—Ä–∞–ª—ã –≤ —è–∑—ã–∫–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ —á–∏—Å–ª–∞ (42, 3.14), —Å–∏–º–≤–æ–ª—ã ('a'), —Å—Ç—Ä–æ–∫–∏ ("hello"), –∏ –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è (true, false). –õ–∏—Ç–µ—Ä–∞–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.

- –í–∏–¥—ã –≤—ã—Ä–∞–∂–µ–Ω–∏–π:

  - –ü—É—Å—Ç—ã–µ `()`: –≠—Ç–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (), –æ–±–æ–∑–Ω–∞—á–∞—é—â–µ–µ "–ø—É—Å—Ç–æ—Ç—É" –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–µ—Ç–≤–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≥–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

  - –°–æ—Å—Ç–∞–≤–Ω—ã–µ `(() () ... ())`: –°–æ—Å—Ç–∞–≤–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è—é—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤ –æ–¥–Ω–æ, –≥–¥–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –≤ –≥—Ä—É–ø–ø–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –≥–¥–µ –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

    - –ü—Ä–∏–º–µ—Ä:

    ```lisp
    (fn print (s str)
      ((print_str(s))
      (nl)))
    ```

    –ó–¥–µ—Å—å `print` –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `print_str` –¥–ª—è –ø–µ—á–∞—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –∑–∞ –∫–æ—Ç–æ—Ä–æ–π —Å–ª–µ–¥—É–µ—Ç –≤—ã–∑–æ–≤ `nl` –¥–ª—è –ø–µ—á–∞—Ç–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏. –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º `(nl)`.

  - –£—Å–ª–æ–≤–Ω—ã–µ `(if cond t f)`: –í—ã–±–∏—Ä–∞–µ—Ç –º–µ–∂–¥—É `t` –∏ `f` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±—É–ª–µ–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è `cond`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤–µ—Ç–≤–ª–µ–Ω–∏—è –∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ.

    - –ü—Ä–∏–º–µ—Ä:

      ```lisp
      (fn factorial (n int) int
        (if (= n 0) 1 (* n (factorial (- n 1)))))
      ```

      –§—É–Ω–∫—Ü–∏—è factorial –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Å–ª–æ–≤–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–∑–æ–≤–æ–≥–æ —Å–ª—É—á–∞—è —Ä–µ–∫—É—Ä—Å–∏–∏: –µ—Å–ª–∏ n —Ä–∞–≤–Ω–æ 0, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 1; –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ–±—è.

  - –¶–∏–∫–ª—ã `(while cond body)`: –í—ã–ø–æ–ª–Ω—è–µ—Ç `body` –ø–æ–∫–∞ `cond` –∏—Å—Ç–∏–Ω–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

    - –ü—Ä–∏–º–µ—Ä:

      ```lisp
      (fn print_n (n int)
        ...
        (while cur (
          (print_byte (+ (% (/ n cur) base) zero))
          (set cur (/ cur base)) ))
        ...)
      ```

  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: `(let var val)`: –û–±—ä—è–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `var` –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ–º `val`. –≠—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º.

    - –ü—Ä–∏–º–µ—Ä: `(let x 10)` —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `x` —Å –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º `10`.

  - `(set var val)`: –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `var` –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `val`. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

    - –ü—Ä–∏–º–µ—Ä: `(set x 20)` –∏–∑–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `x` –Ω–∞ `20`.

  - –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π: `(import "path")`: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –º–æ–¥—É–ª—å –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—É—é –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏ `"path"`. –≠—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö.

    - –ü—Ä–∏–º–µ—Ä: `(import "./math")` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–¥—É–ª—å `math` –∏–∑ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

  - –û–ø–µ—Ä–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞ –∫ —á–ª–µ–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: `.` –∏ `->`: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª—è–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º –æ–±—ä–µ–∫—Ç–∞. –û–ø–µ—Ä–∞—Ç–æ—Ä `.` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Å —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º, —Ç–æ–≥–¥–∞ –∫–∞–∫ `->` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å.

    - –ü—Ä–∏–º–µ—Ä: `(-> ptr id)` –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø–æ–ª—é `id` —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —É–∫–∞–∑—ã–≤–∞–µ—Ç `ptr`.

  - –û–ø–µ—Ä–∞—Ç–æ—Ä—ã: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö, –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏. –í–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ `+`, `-`, `*`, `/`, `%` –¥–ª—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∏, –∏ `=`, `!=` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

    - –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:

      - `+`: –°–ª–æ–∂–µ–Ω–∏–µ –¥–≤—É—Ö —á–∏—Å–µ–ª.
      - `-`: –í—ã—á–∏—Ç–∞–Ω–∏–µ –¥–≤—É—Ö —á–∏—Å–µ–ª.
      - `*`: –£–º–Ω–æ–∂–µ–Ω–∏–µ –¥–≤—É—Ö —á–∏—Å–µ–ª.
      - `/`: –î–µ–ª–µ–Ω–∏–µ –¥–≤—É—Ö —á–∏—Å–µ–ª.
      - `%`: –û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –¥–≤—É—Ö —á–∏—Å–µ–ª.

    - –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:
      - `=`: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ.
      - `!=`: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ.

    –ü—Ä–∏–º–µ—Ä—ã:

    - `(+ a b)`: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É–º–º—É `a` –∏ `b`.
    - `(/ a b)`: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–ª–µ–Ω–∏—è `a` –Ω–∞ `b`.

## –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º —ç–º—É–ª—è—Ç–æ—Ä–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª—è–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–∞–º—è—Ç—å—é, —Å –æ—Å–æ–±—ã–º –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —Ä–∞–±–æ—Ç—É —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç—å—é. –í –æ—Å–Ω–æ–≤–µ —ç–º—É–ª—è—Ç–æ—Ä–∞ –ª–µ–∂–∏—Ç 64-–±–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —á—Ç–æ –æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 64-–±–∏—Ç–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

### –†–µ–≥–∏—Å—Ç—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã:

- acc (Accumulator): –†–µ–≥–∏—Å—Ç—Ä –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
- ip (Instruction Pointer): –£–∫–∞–∑–∞—Ç–µ–ª—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, —Ö—Ä–∞–Ω–∏—Ç –∞–¥—Ä–µ—Å —Ç–µ–∫—É—â–µ–π –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏.
- ptr (Pointer): –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏. –ó–Ω–∞—á–µ–Ω–∏–µ –≤ ptr –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –æ—Ç–∫—É–¥–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–ª–∏ –∫—É–¥–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –ø–∞–º—è—Ç–∏.
- cmd (Command): –†–µ–≥–∏—Å—Ç—Ä –∫–æ–º–∞–Ω–¥, —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—É—â—É—é –∏—Å–ø–æ–ª–Ω—è–µ–º—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—É—é –∏–∑ –ø–∞–º—è—Ç–∏ –ø–æ –∞–¥—Ä–µ—Å—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ ip.
- stack: –°–ª—É–∂–µ–±–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç–µ–∫–æ–≤–æ–π –ø–∞–º—è—Ç—å—é, —Ö—Ä–∞–Ω–∏—Ç –∞–¥—Ä–µ—Å –≤–µ—Ä—à–∏–Ω—ã —Å—Ç–µ–∫–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### –§–ª–∞–≥–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- run: –õ–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–ª–∞–≥, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —ç–º—É–ª—è—Ç–æ—Ä–∞. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ true –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –≤ false ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

### –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å

–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å —ç–º—É–ª—è—Ç–æ—Ä–∞ –ø–æ–¥—Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏:

–ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å: –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∞–¥—Ä–µ—Å–∞ 0x00 –∏ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –≤–≤–µ—Ä—Ö. –í —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã. –î–æ—Å—Ç—É–ø –∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –∞–¥—Ä–µ—Å–∞ –≤ —Ä–µ–≥–∏—Å—Ç—Ä ptr.

–°—Ç–µ–∫–æ–≤–∞—è –ø–∞–º—è—Ç—å: –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ —Ç–∞–∫, —á—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –∏ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –≤–Ω–∏–∑. –°—Ç–µ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏, –≤ —Ç–æ–º —á–∏—Å–ª–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π, –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤—ã–∑–æ–≤–∞. –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–µ–∫–æ–≤–æ–π –ø–∞–º—è—Ç—å—é —Å–ª—É–∂–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä stack, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ —Ç–µ–∫—É—â—É—é –≤–µ—Ä—à–∏–Ω—É —Å—Ç–µ–∫–∞.

### –†–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–∞–º—è—Ç—å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ ptr. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ, –ø—Ä–∏ –ª—é–±–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ø–∞–º—è—Ç–∏, –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫–∞ –∏–ª–∏ –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–∞–º—è—Ç—å—é —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Ä–µ–≥–∏—Å—Ç—Ä–∞ ptr –∏ –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏.

### –°—Ç–µ–∫–æ–≤–∞—è –ø–∞–º—è—Ç—å

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª—è–µ—Ç—Å—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—Ç–µ–∫–æ–≤–æ–π –ø–∞–º—è—Ç—å—é. –°—Ç–µ–∫–æ–≤–∞—è –ø–∞–º—è—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –≤ –Ω–∞—á–∞–ª–µ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –º–µ—Å—Ç–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –±–ª–æ–∫–∞. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∞–ª–ª–æ—Ü–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–∏. –ó–∞—Ç–µ–º, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é –≤—ã—Ä–∞–∂–µ–Ω–∏–π –∏ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞, –≤—ã–¥–µ–ª—è—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã –ø–∞–º—è—Ç–∏.

–ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ –±–ª–æ–∫–∞ –∫–æ–¥–∞, –ø–∞–º—è—Ç—å –¥–ª—è –Ω–µ–≥–æ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç–µ–∫–æ–≤–æ–π –ø–∞–º—è—Ç–∏. –ï—Å–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Ç–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö –∑–∞–Ω–∏–º–∞–µ–º–∞—è –∏–º –ø–∞–º—è—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –±–ª–æ–∫–∞.

### –ü—Ä–∏–º–µ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–µ–∫–æ–≤–æ–π –ø–∞–º—è—Ç–∏ –±–ª–æ–∫–æ–≤

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å —Å—Ç–µ–∫ —Å –∞–¥—Ä–µ—Å–æ–º –Ω–∞—á–∞–ª–∞ 0x0000000000010000. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ –∫–æ–¥–∞:

| Address  | User          | Owner  |
| -------- | ------------- | ------ |
| `0xffc0` | `child_var_n` | child  |
| `0xffc8` | `child_var_2` | child  |
| `0xffd0` | `child_var_1` | child  |
| `0xffd8` | `child_ret`   | child  |
| `0xffe0` | `var_n`       | scope  |
| `0xffe8` | `var_2`       | scope  |
| `0xfff0` | `var_1`       | scope  |
| `0xfff8` | `ret`         | return |

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –±–ª–æ–∫–∞, –µ—Å–ª–∏ –µ–≥–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ –ø–∞–º—è—Ç—å –±—É–¥–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞.

| Address  | User               | Owner  |
| -------- | ------------------ | ------ |
| `0xffc0` |                    | child  |
| `0xffc8` | `child_var_n`      | child  |
| `0xffd0` | `child_var_2`      | child  |
| `0xffd8` | `child_var_1`      | child  |
| `0xffe0` | `var_n`            | scope  |
| `0xffe8` | `var2`             | scope  |
| `0xfff0` | `var1`             | scope  |
| `0xfff8` | `ret`, `child_ret` | return |

### –í–ª–æ–∂–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ–ª—è–µ—Ç –º–µ—Å—Ç–æ –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –∞–¥—Ä–µ—Å–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –ó–∞—Ç–µ–º, –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –≤ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–º–µ—â–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è —Å—Ç–µ–∫–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥ (jmp) –∫ –∞–¥—Ä–µ—Å—É —Ñ—É–Ω–∫—Ü–∏–∏.

| Address               | User         | Owner            |
| --------------------- | ------------ | ---------------- |
| `0xffc0`              | ...          | callee           |
| `0xffc8`              | `body_block` | callee           |
| `0xffd0`              | `arg_2`      | caller           |
| `0xffd8`              | `arg_1`      | caller           |
| `0xffe0`              | `re_addr`    | caller           |
| `0xffe8` <- new_stack | `ret`        | callee -> caller |
| `0xfff0`              |              | caller           |
| `0xfff8` <- old_stack |              | caller           |

## –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

- –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–∞—à–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞: –í —ç–º—É–ª—è—Ç–æ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è 64-–±–∏—Ç–Ω—ã–µ –º–∞—à–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (1, 2, 4, 8 –±–∞–π—Ç).
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–∞–º—è—Ç–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤, –∞–¥—Ä–µ—Å–∞—Ü–∏–∏: –ü–∞–º—è—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—É—é –∏ —Å—Ç–µ–∫–æ–≤—É—é. –†–µ–≥–∏—Å—Ç—Ä—ã –≤–∫–ª—é—á–∞—é—Ç –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä (`acc`), —É–∫–∞–∑–∞—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥ (`cmd`), —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–∫–∞ (`stack`), —É–∫–∞–∑–∞—Ç–µ–ª—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (`ip`), –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å (`ptr`). –ê–¥—Ä–µ—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—É—Ç—ë–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä `ptr`, –∞–¥—Ä–µ—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `stack` –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ.
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞: –í–≤–æ–¥-–≤—ã–≤–æ–¥ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ —á–∏—Ç–∞—Ç—å –∏–∑ –ø–æ—Ç–æ–∫–∞ –≤–≤–æ–¥–∞ –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ –ø–æ—Ç–æ–∫ –≤—ã–≤–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É—è —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
- –ü–æ—Ç–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ—Ö–æ–¥–∞, —É—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã.

### –°–ø–æ—Å–æ–± –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ –≤–∏–¥–µ –±–∏–Ω–∞—Ä–Ω—ã—Ö –∫–æ–¥–æ–≤, –≥–¥–µ –ø–µ—Ä–≤—ã–µ 4 –±–∞–π—Ç–∞ —Å–ª—É–∂–∞—Ç —Ç–µ–≥–æ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∞ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ 4 –±–∞–π—Ç–∞ ‚Äî –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –∫–æ–º–∞–Ω–¥—ã. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è json –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```ts
type Instruction =
  // with args
  | [
      string, // opcode
      number // argument
    ]
  // without args
  | [string];
// constant
[number];

type Program = {
  instructions: Instruction[];
};
```

### –ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

| –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è     | –û–ø–∏—Å–∞–Ω–∏–µ                                                                  |
| -------------- | ------------------------------------------------------------------------- |
| nop            | –ù–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.                                            |
| halt           | –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.                                       |
| deref          | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–∞–º—è—Ç–∏, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç acc, –≤ acc.            |
| deref_4        | –¢–æ –∂–µ, —á—Ç–æ –∏ deref, –Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ 4 –±–∞–π—Ç–∞.                          |
| deref_2        | –¢–æ –∂–µ, —á—Ç–æ –∏ deref, –Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ 2 –±–∞–π—Ç–∞.                          |
| deref_1        | –¢–æ –∂–µ, —á—Ç–æ –∏ deref, –Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ 1 –±–∞–π—Ç.                           |
| load           | –ö–æ–ø–∏—Ä—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã –≤ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä.                                  |
| ptr_acc        | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç ptr —Ä–∞–≤–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—é acc.                                    |
| ptr_ip         | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç ptr —Ä–∞–≤–Ω—ã–º —Å—É–º–º–µ acc –∏ ip.                                  |
| acc->ptr       | –ö–æ–ø–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞ –≤ ptr.                                  |
| acc->stack     | –ö–æ–ø–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞ –≤ —Å—Ç–µ–∫.                                 |
| stack->acc     | –ö–æ–ø–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å—Ç–µ–∫–∞ –≤ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä.                                 |
| stack_offset   | –°–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ—Ä—à–∏–Ω—ã —Å—Ç–µ–∫–∞ —Å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –∫–æ–º–∞–Ω–¥—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ acc. |
| stack\_-offset | –í—ã—á–∏—Ç–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã –∏–∑ –≤–µ—Ä—à–∏–Ω—ã —Å—Ç–µ–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ acc.   |
| shift_stack    | –°–¥–≤–∏–≥–∞–µ—Ç —Å—Ç–µ–∫ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∫–æ–º–∞–Ω–¥—ã.                              |
| unshift_stack  | –°–¥–≤–∏–≥–∞–µ—Ç —Å—Ç–µ–∫ –Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∫–æ–º–∞–Ω–¥—ã.                     |
| local_ptr      | –í—ã—á–∏—Å–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –ø–∞–º—è—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ—Ä—à–∏–Ω—ã —Å—Ç–µ–∫–∞ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞. |
| local_set      | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ —Ä–∞–≤–Ω–æ–µ acc.                     |
| local_get      | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ acc.                             |
| local_set_4    | –¢–æ –∂–µ, —á—Ç–æ –∏ local_set, –Ω–æ –¥–ª—è 4 –±–∞–π—Ç.                                    |
| local_get_4    | –¢–æ –∂–µ, —á—Ç–æ –∏ local_get, –Ω–æ –¥–ª—è 4 –±–∞–π—Ç.                                    |
| local_set_2    | –¢–æ –∂–µ, —á—Ç–æ –∏ local_set, –Ω–æ –¥–ª—è 2 –±–∞–π—Ç.                                    |
| local_get_2    | –¢–æ –∂–µ, —á—Ç–æ –∏ local_get, –Ω–æ –¥–ª—è 2 –±–∞–π—Ç.                                    |
| local_set_1    | –¢–æ –∂–µ, —á—Ç–æ –∏ local_set, –Ω–æ –¥–ª—è 1 –±–∞–π—Ç–∞.                                   |
| local_get_1    | –¢–æ –∂–µ, —á—Ç–æ –∏ local_get, –Ω–æ –¥–ª—è 1 –±–∞–π—Ç–∞.                                   |
| global_set     | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ —Ä–∞–≤–Ω–æ–µ acc.                    |
| global_get     | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–∞–º—è—Ç–∏ –≤ acc.                            |
| inc            | –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ acc –Ω–∞ 1.                                            |
| inc8           | –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ acc –Ω–∞ 8.                                            |
| dec            | –£–º–µ–Ω—å—à–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ acc –Ω–∞ 1.                                              |
| dec8           | –£–º–µ–Ω—å—à–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ acc –Ω–∞ 8.                                              |
| load_cmd       | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤ cmd –ø–æ –∞–¥—Ä–µ—Å—É —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ ip.                        |
| jmp_acc        | –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∞–¥—Ä–µ—Å—É –≤ acc.                                                   |
| jmp            | –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∞–¥—Ä–µ—Å—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –∫–æ–º–∞–Ω–¥—ã.                          |
| jmp_if         | –£—Å–ª–æ–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ acc –∏—Å—Ç–∏–Ω–Ω–æ.                            |
| jmp_if_false   | –£—Å–ª–æ–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ acc –ª–æ–∂–Ω–æ.                              |
| out            | –í—ã–≤–æ–¥–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ acc –≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—ã–≤–æ–¥–∞.                                 |
| add_cmd        | –°–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã —Å acc.                                        |
| add_local      | –°–∫–ª–∞–¥—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å acc.                                      |
| sub_local      | –í—ã—á–∏—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ acc.                                       |
| mul_local      | –£–º–Ω–æ–∂–∞–µ—Ç acc –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                                       |
| div_local      | –î–µ–ª–∏—Ç acc –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                                          |
| rem_local      | –û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è acc –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.                             |
| invert_bool    | –ò–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ acc.                                        |

<!-- –†–∞–∑–¥–µ–ª –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å:

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–∞–Ω–¥):

—Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–∞—à–∏–Ω–Ω—ã—Ö —Å–ª–æ–≤;
—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–∞–º—è—Ç–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤, –∞–¥—Ä–µ—Å–∞—Ü–∏–∏;
—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞;
–ø–æ—Ç–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π;
–∏ —Ç.–ø.

–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.
–°–ø–æ—Å–æ–± –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:

–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö;
—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è -- –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞.

–û–ø–∏—Å–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–∞–Ω–¥ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –µ—ë –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ (CISC, RISC, Acc, Stack). -->

## –¢—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

–ö–æ–º–∞–Ω–¥–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ü–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ -d/--debug –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏.

```
Usage: python translator.py <input_file> [target_file] [-d/--debug]
  Flags:
    -d/--debug enables debug output
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø–∞–ø–∫–µ `src/lang`

- –ö–æ–º–ø–∏–ª—è—Ü–∏—è:

  - –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –µ–¥–∏–Ω–∏—Ü—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã, —á–∏—Å–ª–∞.
  - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ S-–≤—ã—Ä–∞–∂–µ–Ω–∏–π: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, –æ–±–ª–µ–≥—á–∞—é—â–µ–µ –∞–Ω–∞–ª–∏–∑ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∫–æ–¥–∞.
  - –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ –æ–±—ä–µ–∫—Ç–Ω—ã–π –∫–æ–¥: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–¥, –≥–æ—Ç–æ–≤—ã–π –∫ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ª–∏–Ω–∫–æ–≤–∫–µ.

- –õ–∏–Ω–∫–æ–≤–∫–∞:
  - –†–∞—Å—á–µ—Ç —Å–¥–≤–∏–≥–æ–≤: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏–π –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π –≤ –ø–∞–º—è—Ç–∏, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.
  - –°–±–æ—Ä–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ –ª–∏–Ω–µ–π–Ω—ã–π –Ω–∞–±–æ—Ä: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π –∫–æ–¥–∞, –≤–∫–ª—é—á–∞—è –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏, –≤ –µ–¥–∏–Ω—ã–π –ø–æ—Ç–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–æ–∫: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –º–µ—Ç–∫–∏, —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö –∏–º–µ–Ω –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –ø–∞–º—è—Ç–∏ –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–≤—è–∑—å –∏ –≤—ã–∑–æ–≤—ã –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º –∫–æ–¥–µ.

## –ú–æ–¥–µ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```
Usage: python machine.py <machine_code_file> [input_file] [-d/--debug] [-i/--interactive] [-c/--clear] [-m/--memory]
  Flags:
    -d/--debug enables debug output
    -i/--interactive enables interactive mode
    -c/--clear clears the memory before execution
    -m/--memory shows memory debug output
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø–∞–ø–∫–µ `src/computer`

–°—Ö–µ–º–∞ Control Unit:

![ControlUnit](ControlUnit.jpg)

–°—Ö–µ–º–∞ Data Path:
![DataPath](DataPath.png)
![DataPath](DataPath.jpg)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ golden test-–æ–≤.

–¢–µ—Å—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤: [src/golden](./src/golden/)

- [hello](./src/golden/hello.yml)
- [cat](./src/golden/cat.yml)
- [hello_user_name](./src/golden/hello_user_name.yml)
- [prob2](./src/golden/prob2.yml)
- [bubble](./src/golden/bubble.yml)

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `make test`

–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é golden tests: `make test-update-golden`

### –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–¥–Ω–æ–π –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º:

–î–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø—É–∑—ã—Ä—å–∫–æ–º –¥–ª—è –º–∞—Å—Å–∏–≤–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏.

```lisp
  ;; –û–±—ä—è–≤–ª–µ–Ω–∏–µ helper —Ñ—É–Ω–∫—Ü–∏–π
  ;; –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞
  (fn print_byte (n int) ((local_get n) (out 1)))

  ;; –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
  (fn print_str (s str)
    ((let i 0)
    (while (- i (. 's len)) (
      (let t (* (+ (. 's ptr) i)))
      (local_get_1 t)
      (out 1)
      (set i (+ i 1))
      ()))))

  ;; –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ \n
  (fn nl (print_str "\n"))

  ;; –§—É–Ω–∫—Ü–∏—è –¥–ª—è —á–∏—Å–ª–∞
  (fn print_n (n int)
    ((let cur 100000000)
    (let base 10)
    (let zero 48)
    (if (= n 0)
      (print_str "0")
      ((while (= 0 (% (/ n cur) base)) (
          (set cur (/ cur base)) ))
        (while cur (
          (print_byte (+ (% (/ n cur) base) zero))
          (set cur (/ cur base)) ))))
    ()))

  ;; –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —É–∫–∞–∑–∞—Ç–µ–ª—è –≤ –º–∞—Å—Å–∏–≤–µ
  (fn get (arr ints) (i int) int* (+ (. 'arr ptr) (* i 8)))

  ;; –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ –º–∞—Å—Å–∏–≤–∞
  (fn print_ints (arr ints)
    ((print_str "[")
    (let i 0)
    (while (< i (. 'arr len)) (
      (if i (print_str ", ") ())
      (print_n (* (get arr i)))
      (set i (+ i 1))
      ()
    ))
    (print_str "]\n")))

  ;; –§—É–Ω–∫—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ –ø—Å–µ–≤–¥–æ-—Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏
  (fn fill (arr ints)
    ((let i 0)
    (while (< i (. 'arr len)) (
      (pset (get arr i) (% (* (+ i 666) 666342123) 100))
      (set i (+ i 1))
      ()))))

  ;; –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—É–∑—ã—Ä—å–∫–æ–º
  (fn sort (arr ints)
    ((let i 0)
    (while (< i (. 'arr len))
      ((let j (+ i 1))
      (while (< j (. 'arr len)) (
        (if (< (* (get arr j)) (* (get arr i)))
          ((let t (* (get arr j)))
          (pset (get arr j) (* (get arr i)))
          (pset (get arr i) t))
        ())
        (set j (+ j 1))
        ()))
      (set i (+ i 1))
      ()))))


  ;; –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã
  (let heap (mem int 50)) ;; –ê–ª–ª–æ–∫–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –¥–ª—è –º–∞—Å—Å–∏–≤–∞ int —Ä–∞–∑–º–µ—Ä–∞ 50
  (let len 50) ;; –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –¥–ª–∏–Ω—ã
  (def (arr ints)) ;; –û–±—ä—è–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ arr —Ç–∏–ø–∞ ints
  (pset (-> 'arr ptr) heap) ;; –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ –∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞–Ω—É—é –ø–∞–º—è—Ç—å
  (pset (-> 'arr len) len) ;; –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –¥–ª–∏–Ω—ã

  (print_ints arr) ;; –≤—ã–≤–æ–¥ –ø—É—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
  (fill arr) ;; –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏
  (print_ints arr) ;; –≤—ã–≤–æ–¥
  (sort arr) ;; —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—É–∑—ã—Ä—å–∫–æ–º
  (print_ints arr) ;; –≤—ã–≤–æ–¥
```

–í—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

```py
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[18, 41, 64, 87, 10, 33, 56, 79, 2, 25, 48, 71, 94, 17, 40, 63, 86, 9, 32, 55, 78, 1, 24, 47, 70, 93, 16, 39, 62, 85, 8, 31, 54, 77, 0, 23, 46, 69, 92, 15, 38, 61, 84, 7, 30, 53, 76, 99, 22, 45]
[0, 1, 2, 7, 8, 9, 10, 15, 16, 17, 18, 22, 23, 24, 25, 30, 31, 32, 33, 38, 39, 40, 41, 45, 46, 47, 48, 53, 54, 55, 56, 61, 62, 63, 64, 69, 70, 71, 76, 77, 78, 79, 84, 85, 86, 87, 92, 93, 94, 99]
```

### CI –ø—Ä–∏ –ø–æ–º–æ—â–∏ Github Action:

```yaml
name: Python CI

on:
  push:
    branches:
      - main
    paths:
      - '.github/workflows/*'
      - 'python/**'
  pull_request:
    branches:
      - main
    paths:
      - '.github/workflows/*'
      - 'python/**'

defaults:
  run:
    working-directory: ./

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: 3.11

      - name: Install dependencies
        run: |
          make install

      - name: Run tests and collect coverage
        run: |
          poetry run coverage run -m pytest .
          poetry run coverage report -m
        env:
          CI: true

  lint:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: 3.11

      - name: Install dependencies
        run: |
          make install

      - name: Check code formatting with Ruff
        run: poetry run ruff format --check .

      - name: Run Ruff linters
        run: poetry run ruff check .
```

–≥–¥–µ:

- `poetry` -- —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –¥–ª—è —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è Python.
- `coverage` -- —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –æ–± —É—Ä–æ–≤–Ω–µ –ø–æ–∫—Ä—ã—Ç–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.
- `pytest` -- —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤.
- `ruff` -- —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∏–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –∂—É—Ä–Ω–∞–ª —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ `cat`:

```shell
‚ùØ make cat
python ./src/translator.py ./examples/cat.lsp
python ./src/machine.py ./out.o.json ./examples/test.txt -d
DEBUG:root:load32
INFO:root:acc:0000000000000020 ptr:0000000000000000 cmd:0000000a00000020 ip:0000000000000000 stack:0000000000003000
DEBUG:root:acc:0000000000000020 ptr:0000000000000000 cmd:0000000a00000020 ip:0000000000000000 stack:0000000000003000
DEBUG:root:local_set4294967272
INFO:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:00000015ffffffe8 ip:0000000000000008 stack:0000000000003000
DEBUG:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:00000015ffffffe8 ip:0000000000000008 stack:0000000000003000
INFO:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:00000015ffffffe8 ip:0000000000000008 stack:0000000000003000
DEBUG:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:00000015ffffffe8 ip:0000000000000008 stack:0000000000003000
DEBUG:root:shift_stack4294967288
INFO:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:00000012fffffff8 ip:0000000000000010 stack:0000000000002ff8
DEBUG:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:00000012fffffff8 ip:0000000000000010 stack:0000000000002ff8
DEBUG:root:jmp104
INFO:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:0000002900000068 ip:0000000000000060 stack:0000000000002ff8
DEBUG:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:0000002900000068 ip:0000000000000060 stack:0000000000002ff8
DEBUG:root:io_status0
INFO:root:acc:0000000000000020 ptr:0000000000000000 cmd:0000002700000000 ip:0000000000000068 stack:0000000000002ff8
DEBUG:root:acc:0000000000000020 ptr:0000000000000000 cmd:0000002700000000 ip:0000000000000068 stack:0000000000002ff8
INFO:root:acc:0000000000000001 ptr:0000000000000000 cmd:0000002700000000 ip:0000000000000068 stack:0000000000002ff8
DEBUG:root:acc:0000000000000001 ptr:0000000000000000 cmd:0000002700000000 ip:0000000000000068 stack:0000000000002ff8
DEBUG:root:local_set4294967272
INFO:root:acc:0000000000000001 ptr:0000000000002fe0 cmd:00000015ffffffe8 ip:0000000000000070 stack:0000000000002ff8
DEBUG:root:acc:0000000000000001 ptr:0000000000002fe0 cmd:00000015ffffffe8 ip:0000000000000070 stack:0000000000002ff8
INFO:root:acc:0000000000000001 ptr:0000000000002fe0 cmd:00000015ffffffe8 ip:0000000000000070 stack:0000000000002ff8
DEBUG:root:acc:0000000000000001 ptr:0000000000002fe0 cmd:00000015ffffffe8 ip:0000000000000070 stack:0000000000002ff8
DEBUG:root:local_get4294967272
INFO:root:acc:0000000000000001 ptr:0000000000002fe0 cmd:00000016ffffffe8 ip:0000000000000078 stack:0000000000002ff8
DEBUG:root:acc:0000000000000001 ptr:0000000000002fe0 cmd:00000016ffffffe8 ip:0000000000000078 stack:0000000000002ff8
INFO:root:acc:0000000000000001 ptr:0000000000002fe0 cmd:00000016ffffffe8 ip:0000000000000078 stack:0000000000002ff8
DEBUG:root:acc:0000000000000001 ptr:0000000000002fe0 cmd:00000016ffffffe8 ip:0000000000000078 stack:0000000000002ff8
DEBUG:root:local_set4294967288
INFO:root:acc:0000000000000001 ptr:0000000000002ff0 cmd:00000015fffffff8 ip:0000000000000080 stack:0000000000002ff8
DEBUG:root:acc:0000000000000001 ptr:0000000000002ff0 cmd:00000015fffffff8 ip:0000000000000080 stack:0000000000002ff8
INFO:root:acc:0000000000000001 ptr:0000000000002ff0 cmd:00000015fffffff8 ip:0000000000000080 stack:0000000000002ff8
DEBUG:root:acc:0000000000000001 ptr:0000000000002ff0 cmd:00000015fffffff8 ip:0000000000000080 stack:0000000000002ff8
DEBUG:root:local_get4294967280
INFO:root:acc:0000000000000001 ptr:0000000000002fe8 cmd:00000016fffffff0 ip:0000000000000088 stack:0000000000002ff8
DEBUG:root:acc:0000000000000001 ptr:0000000000002fe8 cmd:00000016fffffff0 ip:0000000000000088 stack:0000000000002ff8
INFO:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:00000016fffffff0 ip:0000000000000088 stack:0000000000002ff8
DEBUG:root:acc:0000000000000020 ptr:0000000000002fe8 cmd:00000016fffffff0 ip:0000000000000088 stack:0000000000002ff8
DEBUG:root:jmp_acc0
...
00000000000060 stack:0000000000003000
DEBUG:root:acc:0000000000000001 ptr:0000000000002ff8 cmd:0000000100000000 ip:0000000000000060 stack:0000000000003000
INFO:root:
INFO:root:code –∏–Ω—Å—Ç—Ä: 19
INFO:root:Ticks: 182
INFO:root:Instructions: 106

```

–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞:

```shell
csa-lab3 on ÓÇ† main [=‚úò!+?] is üì¶ v1.0.0 via Óúò v20.12.2 via üêç v3.11.5 (csa-lab3-py3.11) on ‚òÅÔ∏è  (us-east-1)
‚ùØ make test
poetry run pytest -v
============================ test session starts =============================
platform darwin -- Python 3.11.5, pytest-8.0.2, pluggy-1.4.0 -- /Users/wgmlgz/Library/Caches/pypoetry/virtualenvs/csa-lab3-yTzYWjFL-py3.11/bin/python
cachedir: .pytest_cache
rootdir: /Users/wgmlgz/csa-lab3
plugins: golden-0.2.2
collected 4 items

src/golden_test.py::test_translator_and_machine[golden/cat.yml] PASSED [ 25%]
src/golden_test.py::test_translator_and_machine[golden/prob2.yml] PASSED [ 50%]
src/golden_test.py::test_translator_and_machine[golden/hello.yml] PASSED [ 75%]
src/golden_test.py::test_translator_and_machine[golden/bubble.yml] PASSED [100%]

============================= 4 passed in 37.56s =============================
csa-lab3-py3.11
csa-lab3 on ÓÇ† main [=‚úò!+?] is üì¶ v1.0.0 via Óúò v20.12.2 via üêç v3.11.5 (csa-lab3-py3.11) on ‚òÅÔ∏è  (us-east-1) took 37s
‚ùØ make lint
poetry run mypy ./src/machine.py
Success: no issues found in 1 source file
poetry run mypy ./src/translator.py
Success: no issues found in 1 source file
poetry run ruff check ./src
csa-lab3-py3.11
```

```txt
| –§–ò–û                       | –∞–ª–≥             | LoC | code –±–∞–π—Ç | code –∏–Ω—Å—Ç—Ä. | –∏–Ω—Å—Ç—Ä. | —Ç–∞–∫—Ç.  | –≤–∞—Ä–∏–∞–Ω—Ç                                                                               |
| ------------------------- | --------------- | --- | --------- | ----------- | ------ | ------ | ------------------------------------------------------------------------------------- |
| –ú–∞—Ü—é–∫ –í–ª–∞–¥–∏–º–∏—Ä –ù–∏–∫–æ–ª–∞–µ–≤–∏—á | hello           | 9   | -         | 70          | 558    | 997    | lisp -> asm | acc | neum | hw | instr | struct | stream | port | pstr | prob2 | cache |
| –ú–∞—Ü—é–∫ –í–ª–∞–¥–∏–º–∏—Ä –ù–∏–∫–æ–ª–∞–µ–≤–∏—á | cat             | 11  | -         | 19          | 70     | 120    | lisp -> asm | acc | neum | hw | instr | struct | stream | port | pstr | prob2 | cache |
| –ú–∞—Ü—é–∫ –í–ª–∞–¥–∏–º–∏—Ä –ù–∏–∫–æ–ª–∞–µ–≤–∏—á | hello_user_name | 47  | -         | 1053        | 2136   | 3795   | lisp -> asm | acc | neum | hw | instr | struct | stream | port | pstr | prob2 | cache |
| –ú–∞—Ü—é–∫ –í–ª–∞–¥–∏–º–∏—Ä –ù–∏–∫–æ–ª–∞–µ–≤–∏—á | prob2           | 26  | -         | 148         | 1600   | 3037   | lisp -> asm | acc | neum | hw | instr | struct | stream | port | pstr | prob2 | cache |
| –ú–∞—Ü—é–∫ –í–ª–∞–¥–∏–º–∏—Ä –ù–∏–∫–æ–ª–∞–µ–≤–∏—á | bubble          | 79  | -         | 987         | 296130 | 528045 | lisp -> asm | acc | neum | hw | instr | struct | stream | port | pstr | prob2 | cache |
```
